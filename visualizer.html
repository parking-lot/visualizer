<html>
  <head>
    <title>parking-lot visualizer</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      body {
        background-color: #ccc;
      }
      .container {
        height: 80%;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      #sprites {
        display: none;
      }
      #controls {
        text-align: center;
      }
      #controls img {
        width: 50px;
        height: 50px;
      }
    </style>
    <script>

      var interval;
      var scale = 100;
      var pos = 0;
      var frames =  [[["car-n"]],[["car-e"]],[["car-s"]],[["car-w"]]];

      function draw(parkingLot) {
        var width = parkingLot.length;
        var height = parkingLot[0].length;
        var canvas = document.getElementById("canvas");
        canvas.width = width*scale;
        canvas.height = height*scale;
        var ctx = canvas.getContext("2d");
        for (var i = 0; i < width; i++) {
          for (var j = 0; j < height; j++) {
            ctx.drawImage(document.getElementById(parkingLot[j][i]), i*scale, j*scale, scale, scale);
          }
        }
      }

      function back() {
        clearInterval(interval);
        pos--;
        if (pos < 0) pos = frames.length-1;
        draw(frames[pos]);
      }

      function fwd() {
        clearInterval(interval);
        pos++;
        if (pos >= frames.length) pos = 0;
        draw(frames[pos]);
      }

      function load() {
        var input = prompt("What scene would you like to load?");
        if (input) {
          clearInterval(interval);
          frames = JSON.parse(input);
          pos = 0;
          draw(frames[pos]);
        }
      }

      function play() {
        interval = setInterval(function() {
          pos++;
          if (pos >= frames.length) pos = 0;
          draw(frames[pos]);
        }, 500);
      }

      window.addEventListener('load', function() {
        document.getElementById("back").addEventListener('click', back);
        document.getElementById("new").addEventListener('click', load);
        document.getElementById("play").addEventListener('click', play);
        document.getElementById("fwd").addEventListener('click', fwd);
        draw(frames[pos]);
      });

    </script>
  </head>
  <body>
    <div class="container">
      <canvas id="canvas"></canvas>
    </div>
    <div id="controls">
      <img id="back" src="back.png">
      <img id="new" src="load.png">
      <img id="play" src="play.png">
      <img id="fwd" src="fwd.png">
    </div>
    <div id="sprites">
      <img id="entrance" src="entrance.png">
      <img id="exit" src="exit.png">
      <img id="wall" src="wall.png">
      <img id="spot" src="spot.png">
      <img id="car-n" src="car-n.png">
      <img id="car-e" src="car-e.png">
      <img id="car-s" src="car-s.png">
      <img id="car-w" src="car-w.png">
      <img id="road" src="road.png">
      <img id="road-n" src="road-n.png">
      <img id="road-e" src="road-e.png">
      <img id="road-s" src="road-s.png">
      <img id="road-w" src="road-w.png">
      <img id="road-ns" src="road-ns.png">
      <img id="road-ew" src="road-ew.png">
      <img id="road-nes" src="road-nes.png">
      <img id="road-esw" src="road-esw.png">
      <img id="road-swn" src="road-swn.png">
      <img id="road-wne" src="road-wne.png">
    </div>
  </body>
</html>
